<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>cad-boxx.com</title>
	<meta name="description" content="Anime UI â€” A-Frame">
	<script src="https://aframe.io/releases/1.3.0/aframe.min.js"></script>
	<script src="https://unpkg.com/aframe-orbit-controls@1.3.0/dist/aframe-orbit-controls.min.js"></script>
	<script src="https://unpkg.com/aframe-supercraft-loader@1.1.3/dist/aframe-supercraft-loader.js"></script>
	<script src="aframe-gltf-exporter-component.min.js"></script>
	<script src="aframe-screenshot-component.js"></script>
	<script src="aframe-layout-component.js"></script>
	<script src="aframe-physics-system.js"></script>

	<script src="https://unpkg.com/aframe-event-set-component@4.2.1/dist/aframe-event-set-component.min.js"></script>
	<script src="https://unpkg.com/aframe-touch-inspector@1.1.2/dist/aframe-inspector.min.js"></script>

	<link rel="stylesheet" type="text/css" href="aframe.css">
	<script>
        AFRAME.registerComponent('cai', {
            init: function () {
                document.getElementById('ctrl-alt-i').addEventListener('click', function () {
                    // create a new keyboard event
                    var event = new KeyboardEvent('keydown', {
                        key: 'i',
                        altKey: true,
                        ctrlKey: true
                    });
                    // dispatch the ctrl-alt+i key press event
                    document.dispatchEvent(event);
                });
            }
        });
	</script>
	<script>
        AFRAME.registerComponent('click-impulse', {
            init: function () {
                var el = this.el;

                el.addEventListener('click', function () {
                    el.body.applyImpulse(
                        /* impulse */
                        new CANNON.Vec3(
                            THREE.Math.randInt(-20, 20),
                            THREE.Math.randInt(-20, 20),
                            THREE.Math.randInt(-20, 20)
                        ),
                                                                                        /* world position */ new CANNON.Vec3().copy(el.getDOMAttribute('position'))
                    );
                });

            }
        });

        // forward mouse and touch events to the super-hands entity
        AFRAME.registerComponent('capture-mouse', {
            init: function () {
                this.eventRepeater = this.eventRepeater.bind(this)
                this.el.sceneEl.addEventListener('loaded', () => {
                    this.el.sceneEl.canvas.addEventListener('mousedown', this.eventRepeater)
                    this.el.sceneEl.canvas.addEventListener('mouseup', this.eventRepeater)
                    this.el.sceneEl.canvas.addEventListener('touchstart', this.eventRepeater)
                    this.el.sceneEl.canvas.addEventListener('touchmove', this.eventRepeater)
                    this.el.sceneEl.canvas.addEventListener('touchend', this.eventRepeater)
                }, { once: true })
            },
            eventRepeater: function (evt) {
                if (evt.type.startsWith('touch')) {
                    evt.preventDefault()
                    // avoid repeating touchmove because it interferes with look-controls
                    if (evt.type === 'touchmove') { return }
                }
                this.el.emit(evt.type, evt.detail)
            }
        })
	</script>


	<style>
		.button:hover {
			background-color: #fff;
			color: #e43b5e;
		}

		.button {
			background-color: blue;
			border-radius: 8px;
			border: none;
			color: #fff;
			cursor: pointer;
			display: inline-block;
			font-size: 12px;
			height: 34px;
			margin-top: 5px;
			margin-left: 5px;
			outline: none;
			position: relative;
			width: 120px;
			z-index: 999;
		}

		#container {
			position: absolute;
			width: 100%;
			display: flex;
			justify-content: center;
		}
	</style>
</head>
<body>


  	<a-scene gltf-exporter physics inspector="" screenshot="" vr-mode-ui="" device-orientation-permission-ui="">
		<a-assets>
			<a-mixin id="rot0"></a-mixin>
			<a-mixin id="c9am-motion"></a-mixin>
			<a-mixin id="c6am-motion"></a-mixin>
			<a-mixin id="cube" geometry="primitive: box; width: 2.0; height: 2.0; depth: 2.0"
					 hoverable grabbable stretchable draggable droppable
					 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
					 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
					 body="shape: none" shape="shape: box; halfExtents: 1 1 1" shadow></a-mixin>
			<a-mixin id="gltfmodel" gltf-model="#cbb1"
					 hoverable grabbable stretchable draggable droppable clickable
					 event-set__hoveron="_event: hover-start; material.opacity: 0.7; transparent: true"
					 event-set__hoveroff="_event: hover-end; material.opacity: 1; transparent: false"
					 body="shape: none" shape="shape: box; halfExtents: 0.5 0.5 0.5" shadow></a-mixin>
			<img id="metal" src="textures/metal/TexturesCom_MetalBare0043_M.jpg">
			<img id="metal2" src="textures/metal/TexturesCom_MetalBare0086_1_M.jpg">
			<img id="metal3" src="textures/metal/TexturesCom_MetalBare0104_1_M.jpg">

			<a-asset-item id="cb1" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/cadboxx-one.glb?v=1659721895630"></a-asset-item>
			<a-asset-item id="ccylx" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/centerx.glb?v=1672861412777"></a-asset-item>
			<a-asset-item id="ccyly" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/centery.glb?v=1672861445115"></a-asset-item>
			<a-asset-item id="ccylz" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/centerz.glb?v=1672861498630"></a-asset-item>
			<!--xtra-->
			<a-mixin id="cubedtwo" gltf-model="#boxglbgreen"
					 hoverable grabbable stretchable draggable droppable clickable
					 dynamic-body shadow>
			</a-mixin>

			<a-asset-item id="glbsphere" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fsphere-r1-p010.glb?v=1615396331056"></a-asset-item>
			<a-asset-item id="glbdodd" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fdodd-rpt5.glb?v=1632901912292"></a-asset-item>
			<a-asset-item id="glbtett" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Ftet-block-rad1-p000.glb?v=1631529314495"></a-asset-item>
			<a-asset-item id="glbcyll" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/glcyl.glb?v=1661360434803"></a-asset-item>

			<a-asset-item id="cranky" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/cranky.glb?v=1674247987909"></a-asset-item>
			<a-asset-item id="pistonplus" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/pistonplus.glb?v=1674335113584"></a-asset-item>

			<a-asset-item id="waddler" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/waddler.glb?v=1668021723166"></a-asset-item>

			<img id="galaxy" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/780593/galaxy.jpg">
			<img id="moon" src="https://raw.githubusercontent.com/aframevr/sample-assets/master/assets/images/space/moon_1024.jpg">
			<img id="clouds" src="https://raw.githubusercontent.com/aframevr/sample-assets/master/assets/images/space/earth_clouds_2048.png">
			<img id="venus" src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/780593/5710820393_a36f3c730b_m.jpg">
			<img id="pic1" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/border-pic.jpg?v=1654934865728">
			<img id="pic2" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fsclight.png?v=1618928375551">
			<img id="pic3" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/skateboard1200x400bg-white.png?v=1659609701460">
			<img id="pic4" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/cadboxx-border.png?v=1659362950670">
			<img id="pic5" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/roboxx.png?v=1659362885712">
			<img id="pic6" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/cadboxx.png?v=1659434696690">

			<!--sphorb-->
			<a-asset-item id="bb02" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb1.glb?v=1655710163279"></a-asset-item>
			<a-asset-item id="bb03" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb2.glb?v=1655710178528"></a-asset-item>
			<a-asset-item id="bb04" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb3.glb?v=1655710192379"></a-asset-item>
			<a-asset-item id="bb05" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb4.glb?v=1655710213868"></a-asset-item>


			<a-asset-item id="chlink1" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fchink1.glb?v=1606822463366"></a-asset-item>
			<a-asset-item id="chlink2" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fchink2.glb?v=1606822434718"></a-asset-item>




			<a-asset-item id="engine" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/planebox-x.glb?v=1686288365491"></a-asset-item>
			<!--<a-asset-item id="engine" src="engine-edges.glb"></a-asset-item>
		<a-asset-item id="pp11" src="assets/p1.glb"></a-asset-item>
		<a-asset-item id="crank" src="assets/Crankshaft_Pistons.glb"></a-asset-item>
		<a-asset-item id="linear" src="assets/linear-screw-1000-assy.glb"></a-asset-item>
		<a-asset-item id="assembly" src="assets/assembly.glb"></a-asset-item>
		<a-asset-item id="hands" src="assets/hands44.obj"></a-asset-item>
		<a-asset-item id="fv8" src="assets/ferrariv8.glb"></a-asset-item>
		<a-asset-item id="g16" src="assets/gear16.glb"></a-asset-item>
		<a-asset-item id="sshafts" src="assets/splitshafts.glb"></a-asset-item>
			-->
			<a-mixin id="image" geometry="height: 2; width: 2"></a-mixin>
			<a-mixin id="delayVisible" event-set__loaded="visible: true" visible="false"></a-mixin>
			<audio id="blip1" src="audio/321103__nsstudios__blip1.wav"></audio>
			<audio id="blip2" src="audio/321104__nsstudios__blip2.wav"></audio>
			<img id="ring1" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/cblogo-t.png?v=1648022923987">
			<img id="ring2" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fsclight.png?v=1618928375551">
			<img id="ring3" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/cadboxx-border.png?v=1659362950670">
			<img id="ring4" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/screenshot-toolbar-menu-1664451802701.png?v=1664451899625">
			<img id="ring5" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/model.png?v=1665597644170">
			<!--img id="glow1" src="img/glow1.png">
		<img id="ring1" src="img/ring1.png">
		<img id="ring2" src="img/ring2.png">
		<img id="ring3" src="img/ring3.png">
		<img id="ring4" src="img/ring4.png">
		<img id="ring5" src="img/ring5.png">
		<img id="schematic1" src="img/schematic1.png">
		<img id="schematic2" src="img/schematic2.png">
		<img id="schematic3" src="img/schematic3.png">
		<img id="schematic4" src="img/schematic4.png">
		<img id="schematic5" src="img/schematic5.png">
		<img id="text1" src="img/text1.png">
		<img id="text2" src="img/text2.png">
		<img id="text3" src="img/text3.png">-->
			<img id="imm1" src="https://cdn.glitch.com/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538%2Fsclight.png?v=1618928375551">
			<a-asset-item id="cadboxx-floor" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/ground-plane_with_mesh.glb?v=1678034073866"></a-asset-item>


			<!--sphorb-->
			<a-asset-item id="bb02" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb1.glb?v=1655710163279"></a-asset-item>
			<a-asset-item id="bb03" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb2.glb?v=1655710178528"></a-asset-item>
			<a-asset-item id="bb04" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb3.glb?v=1655710192379"></a-asset-item>
			<a-asset-item id="bb05" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/sphorb4.glb?v=1655710213868"></a-asset-item>

		</a-assets>

		<!--sphorb-->
		<a-entity id="yellowSphere" mixin="rot0" position="0 0 0" rotation="0 0 0" scale=".5 .5 .5" static-body gltf-exporter>
			<a-entity id="orb1" gltf-model="#bb02" mixin="rot0" position="0 0 0" rotation="0 0 0" scale="1000 1000 1000" static-body></a-entity>
			<a-entity id="orb2" gltf-model="#bb03" mixin="rot1" position="0 0 0" rotation="0 0 0" scale="1000 1000 1000" static-body
					  animation__rotation__xx="property: rotation; dir: forward; dur: 9000;
                    repeat: indefinite; easing: linear; loop: true; to: -360 -360 -360"></a-entity>
			<a-entity id="orb3" gltf-model="#bb04" mixin="rot1" position="0 0 0" rotation="0 0 0" scale="1000 1000 1000" static-body
					  animation__rotation__yy="property: rotation; dir: forward; dur: 8000;
                    repeat: indefinite; easing: linear; loop: true; to: 360 360 360"></a-entity>
			<a-entity id="orb4" gltf-model="#bb05" mixin="rot1" position="0 0 0" rotation="0 0 0" scale="1000 1000 1000" static-body
					  animation__rotation__zz="property: rotation; dir: forward; dur: 12000;
                    repeat: indefinite; easing: linear; loop: true; to: -360 -360 -360"></a-entity>

		</a-entity>
		<!--sphorb-end-->
		<a-entity id="layoutt" position="0 5 0" rotation="0 0 0">
			<a-entity layout="type:circle; position: 0 5 0;radius:5; rotation:0 0 0">

				<a-entity id="redb2" rotation="0 0 90">

					<a-gltf-model id="h2" src="#bb030" position="0 0 0 " static-body>

					</a-gltf-model>
					<a-entity class="clickable" mixin="cubedtwo" position="0 -1 0" material="color: yellow"
							  constraint="type: hinge;
                               target: #h2;
                               axis: 0 1 0;
                               targetAxis: 0 1 0;
                               pivot: 0 0 0;
                               targetPivot: 0 -1.0 0;" dynamic-body click-impulse>

					</a-entity>

					<a-entity class="clickable" mixin="cubedtwo" position="0 1 0" material="color: yellow"
							  constraint="type: hinge;
                               target: #h2;
                               axis: 0 1 0;
                               targetAxis: 0 1 0;
                               pivot: 0 0 0;
                               targetPivot: 0 1.0 0;" dynamic-body click-impulse>

					</a-entity>
				</a-entity>
			</a-entity>
		</a-entity>

		</a-camera>
		<a-camera id="cam7" position="-12 6 0" look-controls active="false">

		</a-camera>
		<a-camera id="cam8" position="0 6 12" camera orbit-controls="target: 0 0 0; minDistance: 0.5; maxDistance: 18; initialPosition: 0 5 7.5" active="true">

		</a-camera>
		<a-camera id="cam9" position="12 6 0" look-controls active="false">

		</a-camera>

		<a-entity id="cam10" active="false" camera universal-controls position="0 2 10" jump-ability kinematic-body>
			<a-cursor></a-cursor>
		</a-entity>
		<!--
	<a-entity id="cam1" camera orbit-controls="target: 0 0 0; minDistance: 0.5; maxDistance: 10; initialPosition: 0 5 7.5"></a-entity>
				   -->
		<a-entity camera id="cam1" active="true" look-controls wasd-controls position="0 5 15"
				  capture-mouse
				  raycaster cursor="rayOrigin:mouse"
				  body="type: static; shape: sphere; sphereRadius: 0.001"
				  super-hands="colliderEvent: raycaster-intersection;
                     colliderEventProperty: els;
                     colliderEndEvent:raycaster-intersection-cleared;
                     colliderEndEventProperty: clearedEls;">
		</a-entity>

		<a-entity id="cam2" position="-12 12 12">
			<a-camera look-controls wasd-controls active="false"></a-camera>
		</a-entity>
		<a-entity id="cam3" position="12 -8 12" look-controls>
			<a-camera look-controls wasd-controls active="false"></a-camera>
		</a-entity>

		<a-entity id="cam4" position="12 -8 12" look-controls>
			<a-camera look-controls wasd-controls orbit-controls="target: 0 0 0; minDistance: 0.5; maxDistance: 18; initialPosition: 0 5 7.5" active="false">></a-camera>
		</a-entity>

		<a-camera id="cam5" position="0 6 12" look-controls active="false">
			<a-cursor intersection-spawn="event: click; mixin: voxelcdodd1"></a-cursor>
		</a-camera>
		<a-camera id="cam6" position="12 6 0" look-controls active="false">
			<!---->
			<a-entity id="seenmodel" gltf-model="#engine" position="0 0 0" scale="2 2 2" static-body></a-entity>
			<a-entity id="ground" gltf-model="#cadboxx-floor" position="0 0 0" static-body></a-entity>

			<a-light type="point" color="#94c6ff" position="0 0 0" intensity="2" light="intensity: 2" visible="true"></a-light>
			<a-light type="directional" directionaltarget="0 0 0" color="#94c6ff" position="0 6 6" intensity="2" animation="property: light.intensity; from: 0.9; to: 2; delay: 500; dur: 500" light="intensity: 1"></a-light>
			<a-light type="directional" directionalTarget="0 0 0" color="#94c6ff" position="0 6 -6" intensity="2" animation="property: light.intensity; from: 0.9; to: 2; delay: 500; dur: 500" light="intensity: 1"></a-light>
			<a-light type="directional" directionalTarget="0 0 0" color="#94c6ff" position="6 6 6" intensity="2" animation="property: light.intensity; from: 0.9; to: 2; delay: 500; dur: 500" light="intensity: 1"></a-light>
			<a-light type="directional" directionalTarget="0 0 0" color="#94c6ff" position="-6 6 6" intensity="2" animation="property: light.intensity; from: 0.9; to: 2; delay: 500; dur: 500" light="intensity: 1"></a-light>
			<a-light type="directional" directionalTarget="0 0 0" color="#94c6ff" position="6 -6 6" intensity="2" animation="property: light.intensity; from: 0.9; to: 2; delay: 500; dur: 500" light="intensity: 1"></a-light>
			<a-light type="directional" directionalTarget="0 0 0" color="#94c6ff" position="6 0 6" intensity="2" animation="property: light.intensity; from: 1; to: 2; delay: 500; dur: 500" light="intensity: 1"></a-light>

			<a-light type="hemisphere" position="0 0 0" color="#4f6487" intensity="5"></a-light>

			<a-sky id="skeye" src="https://cdn.glitch.global/2a3af8bb-e7b2-4e50-8ce2-68e3e8cf4538/night-city.jpg?v=1681036115747" position="0 0 0" radius="100"></a-sky>

			<a-entity sound="autoplay: true; src: audio/321103__nsstudios__blip1.wav"></a-entity>
			<a-entity sound="autoplay: true; src: audio/321104__nsstudios__blip2.wav"></a-entity>
	</a-scene>


    <script>
        function evr() {
            document.querySelector('a-scene').enterVR();
        };
        function screenshotr() {
            document.querySelector('a-scene').components.screenshot.capture('equirectangular');
        };
        function screenshotp() {
            document.querySelector('a-scene').components.screenshot.capture('perspective');
        };
        function cammy() {
            document.querySelector('a-scene').components.screenshot.capture('perspective');
        };
    </script>

    <script>
        function exportGLTF(input, options) {
            AFRAME.scenes[0].systems['gltf-exporter'].export(input, options);
        }

        document.getElementById('export-scene').addEventListener('click', function () {
            exportGLTF();
        });

        document.getElementById('export-scene-bin').addEventListener('click', function () {
            exportGLTF(undefined, { binary: true });
        });

        document.getElementById('export-sphere').addEventListener('click', function () {
            exportGLTF(document.getElementById('yellowSphere'), { binary: true });
        });

        document.getElementById('export-two').addEventListener('click', function () {
            exportGLTF([document.getElementById('blueBox'), document.getElementById('blueBox')]);
        });

        document.getElementById('export-selector').addEventListener('click', function () {
            exportGLTF(document.querySelectorAll("[geometry='primitive: box']"));
        });

    </script>
    <script>
        function catty() {
            document.getElementById('ctrl-alt-i').addEventListener('click', function () {
                // create a new keyboard event
                var event = new KeyboardEvent('keydown', {
                    key: 'i',
                    altKey: true,
                    ctrlKey: true
                });
                // dispatch the ctrl-alt+i key press event
                document.dispatchEvent(event);
            });
    </script>

    <script type="text/javascript">
        var hueb = new Huebee('.color-input', {
            // options
            notation: 'hex',
            saturations: 2,
            setText: true,
            customColors: ['#ffffff']
        });
        const ADD = 0;
        const REMOVE = 1;
        const EDIT = 2;
        var state = ADD;
        var cursor3D = document.querySelector('#my-cursor');
        var scene = document.querySelector('a-scene');
        var initialScale = 0.01;
        var rotationYOffset = 0;
        var selected = null;

        var reader = new FileReader();
        var colorIndex = 0;
        var usedColor = 10;
        hueb.on('change', function (color, hue, sat, lum) {
            if (state == ADD && cursor3D.getAttribute('stl-model'))
                cursor3D.setAttribute('material', 'color', color);

            if (state == EDIT && selected)
                selected.setAttribute('material', 'color', color);

            for (var i = 0; i < hueb.options.customColors.length; i++)
                if (hueb.options.customColors[i] == color)
                    return;

            hueb.options.customColors[colorIndex] = color;
            hueb.updateColors();
            colorIndex++;
            if (colorIndex > usedColor)
                colorIndex = 0;
        })

        // document.querySelector('#save').addEventListener('click', function() {
        // TODO: save function for electron implementation
        //   scene.flushToDOM(true);
        //   console.log(scene);
        // });



        document.querySelector('#evr').addEventListener('click', function () {
            document.querySelector('a-scene').enterVR();
        });
        document.querySelector('#screenshot-r').addEventListener('click', function () {
            document.querySelector('a-scene').components.screenshot.capture('equirectangular');
        });
        document.querySelector('#screenshot-p').addEventListener('click', function () {
            document.querySelector('a-scene').components.screenshot.capture('perspective');
        });
        document.querySelector('#environment').addEventListener('change', function () {
            document.querySelector('#env').setAttribute('environment', 'preset', event.target.value)
            //document.querySelector('#env').setAttribute('environment', 'ground', 'flat');
            //document.querySelector('#env').setAttribute('environment', 'groundYScale', document.querySelector('#env').getAttribute('environment').groundYScale / 2);
            document.querySelector('#env').setAttribute('environment', 'playArea', 1.5);
            //document.querySelector('#env').setAttribute('environment', 'shadow', 'true');
            document.querySelector('#env').setAttribute('environment', 'flatShading', 'true');
            var reducedDressing = document.querySelector('#env').getAttribute('environment').dressingAmount;
            if (reducedDressing > 50)
                document.querySelector('#env').setAttribute('environment', 'dressingAmount', reducedDressing / 2);
        });
        document.querySelector('#add').addEventListener('click', function () {
            state = ADD;
            if (cursor3D.getAttribute('material'))
                hueb.setColor(cursor3D.getAttribute('material').color);
            cursor3D.setAttribute('visible', true);
            document.querySelector('.active').classList.toggle('active');
            document.querySelector('#add').classList.toggle('active');
        });
        document.querySelector('#remove').addEventListener('click', function () {
            state = REMOVE;
            cursor3D.setAttribute('visible', false);
            document.querySelector('.active').classList.toggle('active');
            document.querySelector('#remove').classList.toggle('active');

        });
        document.querySelector('#edit').addEventListener('click', function () {
            state = EDIT;
            cursor3D.setAttribute('visible', false);
            document.querySelector('.active').classList.toggle('active');
            document.querySelector('#edit').classList.toggle('active');

        });
        var inventoryIndex = 0;
        reader.addEventListener("load", function () {
            if (state != ADD)
                return;
            cursor3D.setAttribute('stl-model', { src: reader.result });
            cursor3D.setAttribute('scale', { x: initialScale, y: initialScale, z: initialScale });
            cursor3D.setAttribute('material', 'color', hueb.color);
            var listElement = document.createElement('a-entity')
            listElement.setAttribute('position', { x: -1.8 + (.45 * inventoryIndex), y: -1, z: -1.5 })

            listElement.setAttribute('rotation', { x: -90, y: 0, z: 0 })
            listElement.setAttribute('class', 'ignore-ray');
            listElement.setAttribute('stl-model', { src: reader.result });
            listElement.setAttribute('scale', { x: initialScale * .2, y: initialScale * .2, z: initialScale * .2 });
            var shortCutText = document.createElement('a-entity');
            shortCutText.setAttribute('text', 'value: ' + (inventoryIndex + 1))
            shortCutText.setAttribute('text', 'anchor: left')
            shortCutText.setAttribute('text', 'baseline', "center")
            shortCutText.setAttribute('scale', '1000 1000 1000')
            //shortCutText.setAttribute('position', {x:-2 + (.45 * inventoryIndex), y:-1.15, z: -1.5})
            shortCutText.setAttribute('position', { x: 0, y: 0, z: -90 })
            shortCutText.setAttribute('rotation', { x: 90, y: 0, z: 0 })
            shortCutText.object3D.layers.set(1)
            inventoryIndex++;

            listElement.appendChild(shortCutText)
            document.querySelector('#my-camera').appendChild(listElement)
        }, false);


        scene.addEventListener("drag-and-drop", function (event) {
            var file = event.detail.file;
            reader.readAsDataURL(file);
        });
        window.addEventListener("keydown", function (event) {
            //console.log(event.key)
            if (inventoryIndex + 1 > event.key) {
                //console.log()
                cursor3D.setAttribute('stl-model', document.querySelector('#my-camera').children[event.key].getAttribute('stl-model'))
            }
        }, true)

        window.addEventListener("contextmenu", function (event) {
            if (state == ADD && cursor3D.getAttribute('stl-model') != null) {
                var el = document.createElement('a-entity');
                el.setAttribute('stl-model', cursor3D.getAttribute('stl-model'));
                el.setAttribute('scale', cursor3D.getAttribute('scale'));
                var rotation = { x: THREE.Math.radToDeg(cursor3D.object3D.rotation.x), y: THREE.Math.radToDeg(cursor3D.object3D.rotation.y), z: THREE.Math.radToDeg(cursor3D.object3D.rotation.z) };
                var position = cursor3D.getAttribute('position');
                var material = cursor3D.getAttribute('material');
                el.setAttribute('position', { x: position.x, y: position.y, z: position.z });
                el.setAttribute('rotation', { x: rotation.x, y: rotation.y, z: rotation.z });
                el.setAttribute('material', 'color', material.color);

                el.addEventListener('raycaster-intersected', function () {
                    selected = el;

                    if (state == EDIT)
                        hueb.setColor(selected.getAttribute('material').color)
                }, true);
                el.addEventListener('raycaster-intersected-cleared', function () {
                    selected = null;
                }, true);

                scene.appendChild(el);
            } else if (state == REMOVE && selected) {
                selected.parentNode.removeChild(selected);
                selected = null;
            }
            event.preventDefault();
        });
        //
        window.addEventListener("wheel", function (event) {
            var currentlySelected;
            if (state == ADD) {
                currentlySelected = cursor3D;
            } else if (state == EDIT) {
                currentlySelected = selected;
            }

            if (!currentlySelected)
                return;
            //
            if (!event.ctrlKey) {
                var currentScale = currentlySelected.getAttribute('scale').x;
                var delta = 0.001;
                if (event.shiftKey)
                    delta = 0.01;
                if (event.deltaY > 0) {
                    delta = -delta;
                }
                currentScale += delta;
                if (currentScale <= 0)
                    currentScale = 0.001;

                currentlySelected.setAttribute('scale', { x: currentScale, y: currentScale, z: currentScale });
            } else {
                var currentRotation = currentlySelected.getAttribute('rotation');
                var delta = 5;
                if (event.shiftKey)
                    delta = 10;
                if (event.deltaY > 0) {
                    delta = -delta;
                }
                currentRotation.y += delta;

                currentlySelected.setAttribute('rotation', { x: currentRotation.x, y: currentRotation.y, z: currentRotation.z });
                //console.log(currentRotation.y);
            }
            event.preventDefault();
            //return true;
        }, true)
        document.addEventListener("wheel", function () {
            event.preventDefault();
        })
    </script>

    <script>

        < script >
        function openNav() {
            document.getElementById("myNav").style.display = "block";
        }

    function closeNav() {
        document.getElementById("myNav").style.display = "none";
    }
    </script>
    <script>
        function myNav() {

        }
    </script>
    <script>
        function cmm1() {//set position relative to object plane
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', true);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm2() {//load
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', true);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm3() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', true);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', trfalseue);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm4() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', true);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm5() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', true);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm6() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', true);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm7() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', true);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm8() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', true);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm9() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', true);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', false);
        };

        function cmm10() {
            var mainCameraEl = document.querySelector('#cam1');
            mainCameraEl.setAttribute('camera', 'active', false);

            var secondCameraEl = document.querySelector('#cam2');
            secondCameraEl.setAttribute('camera', 'active', false);
            var thirdCameraEl = document.querySelector('#cam3');
            thirdCameraEl.setAttribute('camera', 'active', false);
            var fourthCameraEl = document.querySelector('#cam4');
            fourthCameraEl.setAttribute('camera', 'active', false);
            var fifthCameraEl = document.querySelector('#cam5');
            fifthCameraEl.setAttribute('camera', 'active', false);
            var sixthCameraEl = document.querySelector('#cam6');
            sixthCameraEl.setAttribute('camera', 'active', false);
            var seventhCameraEl = document.querySelector('#cam7');
            seventhCameraEl.setAttribute('camera', 'active', false);
            var eigthCameraEl = document.querySelector('#cam8');
            eigthCameraEl.setAttribute('camera', 'active', false);
            var ninthCameraEl = document.querySelector('#cam9');
            ninthCameraEl.setAttribute('camera', 'active', false);
            var tenthCameraEl = document.querySelector('#cam10');
            tenthCameraEl.setAttribute('camera', 'active', true);
        };


    </script>

    <script>
        function evr() {
            document.querySelector('a-scene').enterVR();
        };
        function screenshotr() {
            document.querySelector('a-scene').components.screenshot.capture('equirectangular');
        };
        function screenshotp() {
            document.querySelector('a-scene').components.screenshot.capture('perspective');
        };
        function cammy() {
            document.querySelector('a-scene').components.screenshot.capture('perspective');
        };
    </script>

    <script>
        function exportGLTF(input, options) {
            AFRAME.scenes[0].systems['gltf-exporter'].export(input, options);
        }

        document.getElementById('export-scene').addEventListener('click', function () {
            exportGLTF();
        });

        document.getElementById('export-scene-bin').addEventListener('click', function () {
            exportGLTF(undefined, { binary: true });
        });

        document.getElementById('export-sphere').addEventListener('click', function () {
            exportGLTF(document.getElementById('yellowSphere'), { binary: true });
        });

        document.getElementById('export-two').addEventListener('click', function () {
            exportGLTF([document.getElementById('blueBox'), document.getElementById('yellowSphere')]);
        });

        document.getElementById('export-selector').addEventListener('click', function () {
            exportGLTF(document.querySelectorAll("[geometry='primitive: box']"));
        });

    </script>
    <script>
        function catty() {
            document.getElementById('ctrl-alt-i').addEventListener('click', function () {
                // create a new keyboard event
                var event = new KeyboardEvent('keydown', {
                    key: 'i',
                    altKey: true,
                    ctrlKey: true
                });
                // dispatch the ctrl-alt+i key press event
                document.dispatchEvent(event);
            });
    </script>

    <script type="text/javascript">
        var hueb = new Huebee('.color-input', {
            // options
            notation: 'hex',
            saturations: 2,
            setText: true,
            customColors: ['#ffffff']
        });
        const ADD = 0;
        const REMOVE = 1;
        const EDIT = 2;
        var state = ADD;
        var cursor3D = document.querySelector('#my-cursor');
        var scene = document.querySelector('a-scene');
        var initialScale = 0.01;
        var rotationYOffset = 0;
        var selected = null;

        var reader = new FileReader();
        var colorIndex = 0;
        var usedColor = 10;
        hueb.on('change', function (color, hue, sat, lum) {
            if (state == ADD && cursor3D.getAttribute('stl-model'))
                cursor3D.setAttribute('material', 'color', color);

            if (state == EDIT && selected)
                selected.setAttribute('material', 'color', color);

            for (var i = 0; i < hueb.options.customColors.length; i++)
                if (hueb.options.customColors[i] == color)
                    return;

            hueb.options.customColors[colorIndex] = color;
            hueb.updateColors();
            colorIndex++;
            if (colorIndex > usedColor)
                colorIndex = 0;
        })

        // document.querySelector('#save').addEventListener('click', function() {
        // TODO: save function for electron implementation
        //   scene.flushToDOM(true);
        //   console.log(scene);
        // });



        document.querySelector('#evr').addEventListener('click', function () {
            document.querySelector('a-scene').enterVR();
        });
        document.querySelector('#screenshot-r').addEventListener('click', function () {
            document.querySelector('a-scene').components.screenshot.capture('equirectangular');
        });
        document.querySelector('#screenshot-p').addEventListener('click', function () {
            document.querySelector('a-scene').components.screenshot.capture('perspective');
        });
        document.querySelector('#environment').addEventListener('change', function () {
            document.querySelector('#env').setAttribute('environment', 'preset', event.target.value)
            //document.querySelector('#env').setAttribute('environment', 'ground', 'flat');
            //document.querySelector('#env').setAttribute('environment', 'groundYScale', document.querySelector('#env').getAttribute('environment').groundYScale / 2);
            document.querySelector('#env').setAttribute('environment', 'playArea', 1.5);
            //document.querySelector('#env').setAttribute('environment', 'shadow', 'true');
            document.querySelector('#env').setAttribute('environment', 'flatShading', 'true');
            var reducedDressing = document.querySelector('#env').getAttribute('environment').dressingAmount;
            if (reducedDressing > 50)
                document.querySelector('#env').setAttribute('environment', 'dressingAmount', reducedDressing / 2);
        });
        document.querySelector('#add').addEventListener('click', function () {
            state = ADD;
            if (cursor3D.getAttribute('material'))
                hueb.setColor(cursor3D.getAttribute('material').color);
            cursor3D.setAttribute('visible', true);
            document.querySelector('.active').classList.toggle('active');
            document.querySelector('#add').classList.toggle('active');
        });
        document.querySelector('#remove').addEventListener('click', function () {
            state = REMOVE;
            cursor3D.setAttribute('visible', false);
            document.querySelector('.active').classList.toggle('active');
            document.querySelector('#remove').classList.toggle('active');

        });
        document.querySelector('#edit').addEventListener('click', function () {
            state = EDIT;
            cursor3D.setAttribute('visible', false);
            document.querySelector('.active').classList.toggle('active');
            document.querySelector('#edit').classList.toggle('active');

        });
        var inventoryIndex = 0;
        reader.addEventListener("load", function () {
            if (state != ADD)
                return;
            cursor3D.setAttribute('stl-model', { src: reader.result });
            cursor3D.setAttribute('scale', { x: initialScale, y: initialScale, z: initialScale });
            cursor3D.setAttribute('material', 'color', hueb.color);
            var listElement = document.createElement('a-entity')
            listElement.setAttribute('position', { x: -1.8 + (.45 * inventoryIndex), y: -1, z: -1.5 })

            listElement.setAttribute('rotation', { x: -90, y: 0, z: 0 })
            listElement.setAttribute('class', 'ignore-ray');
            listElement.setAttribute('stl-model', { src: reader.result });
            listElement.setAttribute('scale', { x: initialScale * .2, y: initialScale * .2, z: initialScale * .2 });
            var shortCutText = document.createElement('a-entity');
            shortCutText.setAttribute('text', 'value: ' + (inventoryIndex + 1))
            shortCutText.setAttribute('text', 'anchor: left')
            shortCutText.setAttribute('text', 'baseline', "center")
            shortCutText.setAttribute('scale', '1000 1000 1000')
            //shortCutText.setAttribute('position', {x:-2 + (.45 * inventoryIndex), y:-1.15, z: -1.5})
            shortCutText.setAttribute('position', { x: 0, y: 0, z: -90 })
            shortCutText.setAttribute('rotation', { x: 90, y: 0, z: 0 })
            shortCutText.object3D.layers.set(1)
            inventoryIndex++;

            listElement.appendChild(shortCutText)
            document.querySelector('#my-camera').appendChild(listElement)
        }, false);


        scene.addEventListener("drag-and-drop", function (event) {
            var file = event.detail.file;
            reader.readAsDataURL(file);
        });
        window.addEventListener("keydown", function (event) {
            //console.log(event.key)
            if (inventoryIndex + 1 > event.key) {
                //console.log()
                cursor3D.setAttribute('stl-model', document.querySelector('#my-camera').children[event.key].getAttribute('stl-model'))
            }
        }, true)

        window.addEventListener("contextmenu", function (event) {
            if (state == ADD && cursor3D.getAttribute('stl-model') != null) {
                var el = document.createElement('a-entity');
                el.setAttribute('stl-model', cursor3D.getAttribute('stl-model'));
                el.setAttribute('scale', cursor3D.getAttribute('scale'));
                var rotation = { x: THREE.Math.radToDeg(cursor3D.object3D.rotation.x), y: THREE.Math.radToDeg(cursor3D.object3D.rotation.y), z: THREE.Math.radToDeg(cursor3D.object3D.rotation.z) };
                var position = cursor3D.getAttribute('position');
                var material = cursor3D.getAttribute('material');
                el.setAttribute('position', { x: position.x, y: position.y, z: position.z });
                el.setAttribute('rotation', { x: rotation.x, y: rotation.y, z: rotation.z });
                el.setAttribute('material', 'color', material.color);

                el.addEventListener('raycaster-intersected', function () {
                    selected = el;

                    if (state == EDIT)
                        hueb.setColor(selected.getAttribute('material').color)
                }, true);
                el.addEventListener('raycaster-intersected-cleared', function () {
                    selected = null;
                }, true);

                scene.appendChild(el);
            } else if (state == REMOVE && selected) {
                selected.parentNode.removeChild(selected);
                selected = null;
            }
            event.preventDefault();
        });
        //
        window.addEventListener("wheel", function (event) {
            var currentlySelected;
            if (state == ADD) {
                currentlySelected = cursor3D;
            } else if (state == EDIT) {
                currentlySelected = selected;
            }

            if (!currentlySelected)
                return;
            //
            if (!event.ctrlKey) {
                var currentScale = currentlySelected.getAttribute('scale').x;
                var delta = 0.001;
                if (event.shiftKey)
                    delta = 0.01;
                if (event.deltaY > 0) {
                    delta = -delta;
                }
                currentScale += delta;
                if (currentScale <= 0)
                    currentScale = 0.001;

                currentlySelected.setAttribute('scale', { x: currentScale, y: currentScale, z: currentScale });
            } else {
                var currentRotation = currentlySelected.getAttribute('rotation');
                var delta = 5;
                if (event.shiftKey)
                    delta = 10;
                if (event.deltaY > 0) {
                    delta = -delta;
                }
                currentRotation.y += delta;

                currentlySelected.setAttribute('rotation', { x: currentRotation.x, y: currentRotation.y, z: currentRotation.z });
                //console.log(currentRotation.y);
            }
            event.preventDefault();
            //return true;
        }, true)
        document.addEventListener("wheel", function () {
            event.preventDefault();
        })
    </script>
</body>
</html>
